{
  "hash": "250c90df7567996779c248de10dc1ab9",
  "result": {
    "markdown": "# Deskriptionen {#desc} \n\n\n::: {.cell}\n\n:::\n\n\n\n\n## `summary` {#summary}\n\nHier ein Bespielbefehl für die Berechnung des arith. Mittels, des Medians, der Varianz und des Varianzkoeffizienten mit `tabstat`:\n\n::: {.cell}\n\n```{.stata .cell-code}\nsummarize zpalter\n```\n:::\n\n::: {.cell}\n\n```\n## . set linesize. qui use \"./data/BIBBBAuA_2018_short.dta\", clear\n## \n## . summarize zpalter\n## \n##     Variable |        Obs        Mean    Std. Dev.       Min        Max\n## -------------+---------------------------------------------------------\n##      zpalter |     19,836    47.19228    11.33762         15         87\n```\n:::\n\n\n## `tabstat` {#tabstat}\n\nMit `tabstat` können wir eine ganze Reihe statistischer Kennzahlen für metrische/kontinuierliche Merkmale berechnen. Die Syntax hat dabei das folgende Format: `tabstat varlist, s(*option*) c(stat|var)`\n\nHier eine Übersicht der Kennzahlen:\n\n::: {.cell ft.align='center'}\n::: {.cell-output-display}\n`````{=html}\n<table class=\"table table-condensed\" style=\"font-size: 12px; width: auto !important; margin-left: auto; margin-right: auto;\">\n <thead>\n  <tr>\n   <th style=\"text-align:left;\"> Option </th>\n   <th style=\"text-align:left;\"> Kennzahl </th>\n  </tr>\n </thead>\n<tbody>\n  <tr>\n   <td style=\"text-align:left;font-family: monospace;\"> mean </td>\n   <td style=\"text-align:left;\"> arithm. Mittel </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;font-family: monospace;\"> median </td>\n   <td style=\"text-align:left;\"> Median </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;font-family: monospace;\"> count </td>\n   <td style=\"text-align:left;\"> Anzahl der Beobachtungen ohne Missings </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;font-family: monospace;\"> n </td>\n   <td style=\"text-align:left;\"> entspricht count </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;font-family: monospace;\"> sum </td>\n   <td style=\"text-align:left;\"> Summe der Ausprägungen </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;font-family: monospace;\"> max </td>\n   <td style=\"text-align:left;\"> Maximum </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;font-family: monospace;\"> min </td>\n   <td style=\"text-align:left;\"> Minimum </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;font-family: monospace;\"> range </td>\n   <td style=\"text-align:left;\"> Spannweite = max - min </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;font-family: monospace;\"> variance </td>\n   <td style=\"text-align:left;\"> Varianz </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;font-family: monospace;\"> sd </td>\n   <td style=\"text-align:left;\"> Standardabweichung </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;font-family: monospace;\"> cv </td>\n   <td style=\"text-align:left;\"> Variationskoefficient (sd/mean) </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;font-family: monospace;\"> skewness </td>\n   <td style=\"text-align:left;\"> Schiefe </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;font-family: monospace;\"> kurtosis </td>\n   <td style=\"text-align:left;\"> Wölbung </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;font-family: monospace;\"> pX </td>\n   <td style=\"text-align:left;\"> X. Perzentil (5,10,25,50,75,90,95,99) </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;font-family: monospace;\"> iqr </td>\n   <td style=\"text-align:left;\"> Interquartilsdistanz = p75 - p25 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;font-family: monospace;\"> q </td>\n   <td style=\"text-align:left;\"> Entspricht p25 p50 p75 </td>\n  </tr>\n</tbody>\n</table>\n\n`````\n:::\n:::\n\n\nHier ein Bespielbefehl für die Berechnung des arith. Mittels, des Medians, der Varianz und des Varianzkoeffizienten mit `tabstat`:\n\n::: {.cell}\n\n```{.stata .cell-code}\ntabstat zpalter, s(mean median var cv) c(stat)\n```\n:::\n\n::: {.cell}\n\n```\n## . set linesize. qui use \"./data/BIBBBAuA_2018_short.dta\", clear\n## \n## . tabstat zpalter, s(mean sd min max n) c(stat)\n## \n##     variable |      mean        sd       min       max         N\n## -------------+--------------------------------------------------\n##      zpalter |  47.19228  11.33762        15        87     19836\n## ----------------------------------------------------------------\n```\n:::\n\n\n\nFür Deskriptionsbefehle müssen wir immer zuerst ein `estpost` voranstellen:\n\n::: {.cell}\n\n```{.stata .cell-code}\nestpost tabstat F518_SUF, c(stat) stat(mean sd min max n)\nesttab, cells(\"mean sd min max count\")\n```\n:::\n\n::: {.cell}\n\n```\n## . set linesize. qui use \"./data/BIBBBAuA_2018_short.dta\", clear\n## \n## . estpost tabstat F518_SUF, c(stat) stat(mean sd min max n)\n## \n## Summary statistics: mean sd min max count\n##      for variables: F518_SUF\n## \n##              |   e(mean)      e(sd)     e(min)     e(max)   e(count) \n## -------------+-------------------------------------------------------\n##     F518_SUF |  3532.109   3530.928          1      72000      16635 \n## \n## . esttab, cells(\"mean sd min max count\")\n## \n## -----------------------------------------------------------------------------\n##                       (1)                                                    \n##                                                                              \n##                      mean           sd          min          max        count\n## -----------------------------------------------------------------------------\n## F518_SUF         3532.109     3530.928            1        72000        16635\n## -----------------------------------------------------------------------------\n## N                   16635                                                    \n## -----------------------------------------------------------------------------\n```\n:::\n\n\n\nWenn wir jetzt den Median hinzufügen möchten, brauchen wir ein neues `estpost`:\n\n::: {.cell}\n\n```{.stata .cell-code}\nesttab, cells(\"mean p50 sd min max count\")\n```\n:::\n\n::: {.cell}\n\n```\n## . set linesize . qui use \"./data/BIBBBAuA_2018_short.dta\", clear\n## \n## . qui estpost tabstat F518_SUF, c(stat) stat(mean sd min max n)\n## \n## . esttab, cells(\"mean p50 sd min max count\")\n## \n## ------------------------------------------------------------------------------------------\n##                       (1)                                                                 \n##                                                                                           \n##                      mean          p50           sd          min          max        count\n## ------------------------------------------------------------------------------------------\n## F518_SUF         3532.109                  3530.928            1        72000        16635\n## ------------------------------------------------------------------------------------------\n## N                   16635                                                                 \n## ------------------------------------------------------------------------------------------\n```\n:::\n\n\n\n`tabstat` mit `p50` für Median:\n\n::: {.cell}\n\n```{.stata .cell-code}\nestpost tabstat F518_SUF, c(stat) stat(mean p50 sd min max n)\nesttab, cells(\"mean p50 sd min max count\")\n```\n:::\n\n::: {.cell}\n\n```\n## . set linesize . qui use \"./data/BIBBBAuA_2018_short.dta\", clear\n## \n## . estpost tabstat F518_SUF, c(stat) stat(mean p50 sd min max n)\n## \n## Summary statistics: mean p50 sd min max count\n##      for variables: F518_SUF\n## \n##              |   e(mean)     e(p50)      e(sd)     e(min)     e(max)   e(count) \n## -------------+------------------------------------------------------------------\n##     F518_SUF |  3532.109       3000   3530.928          1      72000      16635 \n## \n## . esttab, cells(\"mean p50 sd min max count\")\n## \n## ------------------------------------------------------------------------------------------\n##                       (1)                                                                 \n##                                                                                           \n##                      mean          p50           sd          min          max        count\n## ------------------------------------------------------------------------------------------\n## F518_SUF         3532.109         3000     3530.928            1        72000        16635\n## ------------------------------------------------------------------------------------------\n## N                   16635                                                                 \n## ------------------------------------------------------------------------------------------\n```\n:::\n\n\nSo oder so sieht diese Tabelle sieht natürlich noch überhaupt nicht so aus, wie wir sie haben möchten.\nUm das anzupassen, stehen uns eine ganze Reihe an Formatierungsbefehlen zur Verfügung.\n\n+ `nonumber`  $\\Rightarrow$ Zahl oben ausblenden\n+ `nomtitle` $\\Rightarrow$  Modelltitel oben ausblenden (hier die Leerzeile)\n+ `noobs` $\\Rightarrow$     Beobachtungszahl unten ausblenden\n+ `label` $\\Rightarrow$     Variablenlaben verwenden\n\n::: {.cell}\n\n```{.stata .cell-code}\nesttab, ///\n\tcells(\"mean p50 sd min max count\") ///\n\tnonumber nomtitle noobs label\n```\n:::\n\n::: {.cell}\n\n```\n## . quiet. esttab, ///\n## >         cells(\"mean p50 sd min max count\") ///\n## >         nonumber nomtitle noobs label\n## \n## --------------------------------------------------------------------------------------------------\n##                              mean          p50           sd          min          max        count\n## --------------------------------------------------------------------------------------------------\n## Wie hoch ist Ih          3532.109         3000     3530.928            1        72000        16635\n## --------------------------------------------------------------------------------------------------\n```\n:::\n\n\nDas label ist hier allerdings abgeschnitten, wäre aber die Frageformulierung.\nStattdessen hätten wir gernen einen Variablennamen, dazu können wir mit `coeflabel()` den Variablennamen und in `\"\"` ein Label angeben.\nAußerdem wollen wir die Spalten ansprechender beschriften, dazu geben wir mit `collabels` ebenfalls in `\"\"` der Reihe nach Werte an:\n\n::: {.cell}\n\n```{.stata .cell-code}\nesttab, ///\n\tcells(\"mean sd min max count\") ///\n\tnonumber nomtitle nonote noobs label ///\n\tcollabels(\"Mean\" \"SD\" \"Median\" \"Min\" \"Max\" \"N\") ///\n\tcoeflabel(F518_SUF \"Bruttoverdienst\")\n```\n:::\n\n::: {.cell}\n\n```\n## . quiet. esttab, ///\n## >         cells(\"mean p50 sd min max count\") ///\n## >                 nonumber nomtitle nonote noobs label ///\n## >         collabels(\"Mean\" \"SD\" \"Median\" \"Min\" \"Max\" \"N\") ///\n## >         coeflabel(F518_SUF \"Bruttoverdienst\")\n## \n## --------------------------------------------------------------------------------------------------\n##                              Mean           SD       Median          Min          Max            N\n## --------------------------------------------------------------------------------------------------\n## Bruttoverdienst          3532.109         3000     3530.928            1        72000        16635\n## --------------------------------------------------------------------------------------------------\n```\n:::\n\n\nAbschließend möchten wir noch die Kennzahlen formatieren.\nDazu können wir auf die Zahlenformate in Stata zurückgreifen - [hier](#format) eine kurze Erklärung dazu.\n\n::: {.cell}\n\n```{.stata .cell-code}\nesttab, ///\n\tcells(\"mean(fmt(%13.2fc)) sd(fmt(%13.2fc)) min(fmt(%13.0fc)) max(fmt(%13.0fc)) count(fmt(%6.0fc))\")  ///\n\tnonumber nomtitle nonote noobs label ///\n\tcollabels(\"Mean\" \"SD\" \"Min\" \"Max\" \"N\") ///\n\tcoeflabel(F518_SUF \"Bruttoverdienst\")\n```\n:::\n\n::: {.cell}\n\n```\n## . quiet. esttab, ///\n## >         cells(\"mean(fmt(%13.2fc)) sd(fmt(%13.2fc)) min(fmt(%13.0fc)) max(fmt(%13.0fc)) count(fmt(%6.0fc))\")  ///\n## >         nonumber nomtitle nonote noobs label ///\n## >         collabels(\"Mean\" \"SD\" \"Min\" \"Max\" \"N\") ///\n## >         coeflabel(F518_SUF \"Bruttoverdienst\")\n## \n## -------------------------------------------------------------------------------------\n##                              Mean           SD          Min          Max            N\n## -------------------------------------------------------------------------------------\n## Bruttoverdienst          3,532.11     3,530.93            1       72,000       16,635\n## -------------------------------------------------------------------------------------\n```\n:::\n\n\n***\n\n**[Übung 1](#tabst1)**\n\n***\n\n## export \n\nBisher bewegen wir uns aber immer noch im Ausgabe-Fenster von Stata.\nUm die Tabelle nun zu exportieren, hängen wir ein `using`-Statement an `esttab`.\nFür das Ausgabeformat hängen wir einfach die gewünschte Dateiendung an:\n\n+ `.rtf` für eine Datei, die mit Word geöffnet und weiterverarbeitet werden kann\n+ `.tex` für eine Latex-Datei\n+ `.csv` für eine Excel-Datei (mehr zum Excel-Export [hier](#misc))\n\n\n::: {.cell}\n\n```{.stata .cell-code}\nesttab using \"${res}/tab1.rtf\", ///\n\tcells(\"mean(fmt(%13.2fc)) sd(fmt(%13.2fc)) min(fmt(%4.0fc)) max(fmt(%4.0fc)) count(fmt(%4.0fc))\")  ///\n\tnonumber nomtitle nonote noobs label ///\n\tcollabels(\"Mean\" \"SD\" \"Min\" \"Max\" \"N\") ///\n\tcoeflabel(F518_SUF \"Bruttoverdienst\") ///\n\treplace\n   \nesttab using \"${res}/tab1.tex\", ///\n\tcells(\"mean(fmt(%13.2fc)) sd(fmt(%13.2fc)) min(fmt(%4.0fc)) max(fmt(%4.0fc)) count(fmt(%4.0fc))\")  ///\n\tnonumber nomtitle nonote noobs label ///\n\tcollabels(\"Mean\" \"SD\" \"Min\" \"Max\" \"N\") ///\n\tcoeflabel(F518_SUF \"Bruttoverdienst\")  ///\n\treplace booktabs\n```\n:::\n\n\n\n## Zusätzliche Kennzahlen hinzufügen\n\nGelegentlich möchten wir aber unserer Tabelle auch noch weitere Kennzahlen hinzufügen, bspw. aus `mdesc` oder `fastgini`.\n\n::: {.cell}\n\n```{.stata .cell-code}\nssc install mdesc\nssc install fastgini\n```\n:::\n\n\nDazu können wir die `estadd`-Funktion nutzen.\nUm eine neue Spalte mit der gewünschten Kennzahl zu erhalten, müssen wir `estadd matrix` verwenden.\nDeswegen müssen wir ein klein bisschen in die `matrix`-Welt von Stata eintauchen, um die Werte richtig hinzufügen zu können.\n\n\n::: {.cell}\n\n```{.stata .cell-code}\nmdesc F518_SUF\nreturn list\nmat miss = r(miss)\nmat colname miss = F518_SUF\nmat list miss\n```\n:::\n\n::: {.cell}\n\n```\n## . quiet. mdesc F518_SUF\n## \n##     Variable    |     Missing          Total     Percent Missing\n## ----------------+-----------------------------------------------\n##        F518_SUF |       3,377         20,012          16.87\n## ----------------+-----------------------------------------------\n## \n## . return list\n## \n## scalars:\n##             r(percent) =  16.87487507495502\n##               r(total) =  20012\n##                r(miss) =  3377\n## \n## macros:\n##           r(miss_vars) : \"F518_SUF\"\n## \n## . mat miss = r(miss)\n## \n## . mat colname miss = F518_SUF\n## \n## . mat list miss\n## \n## symmetric miss[1,1]\n##     F518_SUF\n## r1      3377\n```\n:::\n\n\nDie so formatierte $1x1$ `matrix` können wir jetzt in unsere Tabelle einfügen, indem wir `estadd matrix miss` angeben:\n\n::: {.cell}\n\n```{.stata .cell-code}\nestadd mat miss\n```\n:::\n\n::: {.cell}\n\n```\n## . quiet. estadd mat miss\n## \n## added matrix:\n##                e(miss) :  1 x 1\n```\n:::\n\n\nAnschließend können wir die Tabelle mit `esttab` erstellen und die Information aus `mdesc` unter dem Namen der hinzugefügten `matrix` aufrufen:\n\n::: {.cell}\n\n```{.stata .cell-code}\nesttab, cells(\"mean(fmt(%13.2fc)) sd(fmt(%13.2fc)) min max count(fmt(%13.0fc)) miss(fmt(%13.0fc))\") ///\n\t\tnoobs nomtitle nonumber label collabels(\"Mean\" \"SD\" \"Min\" \"Max\" \"N\" \"Missings\") ///\n    coeflabel(F518_SUF \"Bruttoverdienst\") \n```\n:::\n\n::: {.cell}\n\n```\n## . quiet. esttab, cells(\"mean(fmt(%13.2fc)) sd(fmt(%13.2fc)) min max count(fmt(%13.0fc)) miss(fmt(%13.0fc))\") noobs ///\n## >                 nomtitle nonumber label collabels(\"Mean\" \"SD\" \"Min\" \"Max\" \"N\" \"Missings\") ///\n## >     coeflabel(F518_SUF \"Bruttoverdienst\") \n## \n## --------------------------------------------------------------------------------------------------\n##                              Mean           SD          Min          Max            N     Missings\n## --------------------------------------------------------------------------------------------------\n## Bruttoverdienst          3,532.11     3,530.93         1.00    72,000.00       16,635        3,377\n## --------------------------------------------------------------------------------------------------\n```\n:::\n\n\n***\n\n**[Übung 2](#tabst2)**\n\n***\n\n\n## mehrere Variablen \n\nWir können natürlich auch mehrere Variablen in `tabstat` und damit in `esttab` aufnehmen:\n\n\n::: {.cell}\n\n```{.stata .cell-code}\nestpost tabstat zpalter F518_SUF, c(stat) stat(mean sd min max n)\nesttab, cells(\"mean(fmt(%13.2fc)) sd(fmt(%13.2fc)) min max count(fmt(%13.0fc))\") noobs ///\n\t\tnomtitle nonumber label collabels(\"Mean\" \"SD\" \"Min\" \"Max\" \"N\") ///\n\t\tcoeflabel(F518_SUF \"Bruttoverdienst\" zpalter \"Alter\") \n```\n:::\n\n::: {.cell}\n\n```\n## . quiet.   esttab, cells(\"mean(fmt(%13.2fc)) sd(fmt(%13.2fc)) min max count(fmt(%13.0fc))\") noobs ///\n## >                 nomtitle nonumber label collabels(\"Mean\" \"SD\" \"Min\" \"Max\" \"N\") ///\n## >                 coeflabel(F518_SUF \"Bruttoverdienst\" zpalter \"Alter\") \n## \n## -------------------------------------------------------------------------------------\n##                              Mean           SD          Min          Max            N\n## -------------------------------------------------------------------------------------\n## Alter                       47.19        11.34        15.00        87.00       19,836\n## Bruttoverdienst          3,532.11     3,530.93         1.00    72,000.00       16,635\n## -------------------------------------------------------------------------------------\n```\n:::\n\n\nEtwas tricky wird's aber, wenn wir auch hier eigene Kennzahlen miteinfügen möchten.\nDie `r()`-Skalare für `mdesc` (und auch `fastgini`) geben uns nämlich nur den Wert für die *letzte* Variable aus:\n\n::: {.cell}\n\n```{.stata .cell-code}\nmdesc zpalter F518_SUF\nreturn list\n```\n:::\n\n::: {.cell}\n\n```\n## . quiet. mdesc zpalter F518_SUF\n## \n##     Variable    |     Missing          Total     Percent Missing\n## ----------------+-----------------------------------------------\n##         zpalter |         176         20,012           0.88\n##        F518_SUF |       3,377         20,012          16.87\n## ----------------+-----------------------------------------------\n## \n## . return list\n## \n## scalars:\n##             r(percent) =  16.87487507495502\n##               r(total) =  20012\n##                r(miss) =  3377\n## \n## macros:\n##           r(miss_vars) : \"zpalter F518_SUF\"\n```\n:::\n\nDaher müssen wir uns hier mit einer Schleife helfen:\n\n::: {.cell}\n\n```{.stata .cell-code}\n* matrix vorbereiten\n\tglo x = \"zpalter F518_SUF\" // auszuwertende Variablen\n\tglo len: word count ${x} \t// wie viele sind es?\n\tmat m1 = J(1,${len},.)\t   // entsprechend lange Matrix erstellen J(Zeilen,Spalten,Inhalt)\n\tmat colname m1 = ${x}\t\t// spalten schon mal richtig benennen\n\tmat list m1\t\t\t\t\t// ansehen\n\n* Schleife über die angegebenen Variablen\n\tforval y = 1/$len {\n\t\tloc v: dis\tword(\"${x}\",`y') // y.tes Wort aus x in v ablegen\n\t\tdisplay \"`v'\"\t\t\t\t// zur Kontrolle: v anzeigen\n\t\tmdesc `v'\t\t\t\t\t// missings in v berechnen\n\t\tloc res_mat = r(miss)\n\t\tmat m1[1,`y'] = `res_mat'\n\t}\n\tmat l m1\n```\n:::\n\n::: {.cell}\n\n```\n## . quiet. * matrix vorbereiten\n## .         glo x = \"zpalter F518_SUF\" // auszuwertende Variablen\n## \n## .         glo len: word count ${x}        // wie viele sind es?\n## \n## .         mat m1 = J(1,${len},.)     // entsprechend lange Matrix erstellen J(Zeilen,Spalten,Inhalt)\n## \n## .         mat colname m1 = ${x}           // spalten schon mal richtig benennen\n## \n## .         mat list m1                                     // ansehen\n## \n## m1[1,2]\n##      zpalter  F518_SUF\n## r1         .         .\n## \n## . \n## . * Schleife über die angegebenen Variablen\n## .         forval y = 1/$len {\n##   2.                 loc v: dis      word(\"${x}\",`y') // y.tes Wort aus x in v ablegen\n##   3.                 display \"`v'\"                           // zur Kontrolle: v anzeigen\n##   4.                 mdesc `v'                                       // missings in v berechnen\n##   5.                 loc res_mat = r(miss)\n##   6.                 mat m1[1,`y'] = `res_mat'\n##   7.         }\n## zpalter\n## \n##     Variable    |     Missing          Total     Percent Missing\n## ----------------+-----------------------------------------------\n##         zpalter |         176         20,012           0.88\n## ----------------+-----------------------------------------------\n## F518_SUF\n## \n##     Variable    |     Missing          Total     Percent Missing\n## ----------------+-----------------------------------------------\n##        F518_SUF |       3,377         20,012          16.87\n## ----------------+-----------------------------------------------\n## \n## .         mat l m1\n## \n## m1[1,2]\n##      zpalter  F518_SUF\n## r1       176      3377\n```\n:::\n\n\n...und dann können wir wieder zur gewohnten Routine zurück. `estpost` mit `quietly` unterdrückt den Output, den wir ja schon kennen.\n\n::: {.cell}\n\n```{.stata .cell-code}\nquietly estpost tabstat zpalter F518_SUF, c(stat) stat(mean sd min max n)\nestadd mat m1\nesttab, cells(\"count(fmt(%13.0fc)) m1(fmt(%13.0fc))\")  noobs ///\n\t\tnomtitle nonumber label collabels(\"N\" \"Missings\") ///\n  \tcoeflabel(F518_SUF \"Bruttoverdienst\" zpalter \"Alter\")\n```\n:::\n\n::: {.cell}\n\n```\n## . quiet. esttab, cells(\"count(fmt(%13.0fc)) m1(fmt(%13.0fc))\")  noobs ///\n## >                 nomtitle nonumber label collabels(\"N\" \"Missings\") ///\n## >         coeflabel(F518_SUF \"Bruttoverdienst\" zpalter \"Alter\")\n## \n## ----------------------------------------------\n##                                 N     Missings\n## ----------------------------------------------\n## Alter                      19,836          176\n## Bruttoverdienst            16,635        3,377\n## ----------------------------------------------\n```\n:::\n\n\n***\n\n**[Übung 3](#tabst3)**\n\n***\n\n## Gruppenvergleich\t\n\nMit `by(S1)` bekommen wir einen Gruppenvergleich - hier zwischen Männern und Frauen. \nDie Option `nototal` unterdrückt dabei die `total`-Angabe\n\n::: {.cell}\n\n```{.stata .cell-code}\nestpost tabstat zpalter F518_SUF, by(S1) c(stat) stat(mean sd)\nestpost tabstat zpalter F518_SUF, by(S1) c(stat) stat(mean sd) nototal\t\n```\n:::\n\n::: {.cell}\n\n```\n## . quiet. estpost tabstat zpalter F518_SUF, by(S1) c(stat) stat(mean sd)\n## \n## Summary statistics: mean sd\n##      for variables: zpalter F518_SUF\n##   by categories of: S1\n## \n##           S1 |   e(mean)      e(sd) \n## -------------+----------------------\n## männlich     |                      \n##      zpalter |  46.49079   11.87744 \n##     F518_SUF |  4232.735   3951.324 \n## -------------+----------------------\n## weiblich     |                      \n##      zpalter |  47.90402   10.71604 \n##     F518_SUF |  2800.926   2852.935 \n## -------------+----------------------\n## Total        |                      \n##      zpalter |  47.19228   11.33762 \n##     F518_SUF |  3532.109   3530.928 \n## \n## . estpost tabstat zpalter F518_SUF, by(S1) c(stat) stat(mean sd) nototal  \n## \n## Summary statistics: mean sd\n##      for variables: zpalter F518_SUF\n##   by categories of: S1\n## \n##           S1 |   e(mean)      e(sd) \n## -------------+----------------------\n## männlich     |                      \n##      zpalter |  46.49079   11.87744 \n##     F518_SUF |  4232.735   3951.324 \n## -------------+----------------------\n## weiblich     |                      \n##      zpalter |  47.90402   10.71604 \n##     F518_SUF |  2800.926   2852.935\n```\n:::\n\n\nMit `par` bekommen wir den entsprechenden Wert in Klammern angezeigt:\n\n\n::: {.cell}\n\n```{.stata .cell-code}\nesttab, cells(mean(fmt(%10.1fc)) sd(fmt(%13.3fc) par)) nostar  nonumber unstack ///\n  nomtitle nonote noobs  ///\n   collabels(none)  ///\n   eqlabels(\"Männer\" \"Frauen\") /// \n   nomtitles ///\n   coeflabel(F518_SUF \"Bruttoverdienst\" zpalter \"Alter\")\n```\n:::\n\n::: {.cell}\n\n```\n## . quiet. esttab, cells(mean(fmt(%10.1fc)) sd(fmt(%13.3fc) par)) nostar  nonumber unstack ///\n## >   nomtitle nonote noobs  ///\n## >    collabels(none)  ///\n## >    eqlabels(\"Männer\" \"Frauen\") /// \n## >    nomtitles ///\n## >    coeflabel(F518_SUF \"Bruttoverdienst\" zpalter \"Alter\")\n## \n## --------------------------------------\n##                    Männer       Frauen\n## --------------------------------------\n## Alter                46.5         47.9\n##                  (11.877)     (10.716)\n## Bruttoverd~t      4,232.7      2,800.9\n##               (3,951.324)  (2,852.935)\n## --------------------------------------\n```\n:::\n\n\n\nUm die in `cells()` angegebenen Werte in eine Zeile zu bringen, müssen wir sie in `\"\"` setzen.  \n\n::: {.cell}\n\n```{.stata .cell-code}\nesttab, cells(\"mean(fmt(%10.1fc)) sd(fmt(%13.3fc) par)\") nostar  nonumber unstack ///\n  nomtitle nonote noobs label  ///\n   collabels(none)  ///\n   eqlabels(\"Männer\" \"Frauen\") /// \n   nomtitles ///\n   coeflabel(F518_SUF \"Bruttoverdienst\" zpalter \"Alter\")   \n```\n:::\n\n::: {.cell}\n\n```\n## . quiet. esttab, cells(\"mean(fmt(%10.1fc)) sd(fmt(%13.3fc) par)\") nostar  nonumber unstack ///\n## >   nomtitle nonote noobs label  ///\n## >    collabels(none) gap   ///\n## >    eqlabels(\"Männer\" \"Frauen\") /// \n## >    nomtitles ///\n## >    coeflabel(F518_SUF \"Bruttoverdienst\" zpalter \"Alter\")  \n## \n## ------------------------------------------------------------------------\n##                            Männer                    Frauen             \n## ------------------------------------------------------------------------\n## Alter                        46.5     (11.877)         47.9     (10.716)\n## \n## Bruttoverdienst           4,232.7  (3,951.324)      2,800.9  (2,852.935)\n## ------------------------------------------------------------------------\n```\n:::\n\n\nMit `collabels()` können wir die Werte auch beschriften.  \n\n::: {.cell}\n\n```{.stata .cell-code}\nesttab, cells(\"mean(fmt(%10.1fc)) sd(fmt(%13.3fc) par)\") nostar  nonumber unstack ///\n  nomtitle nonote noobs label  ///\n   collabels(\"Mean\" \"SD\" \"Mean\" \"SD\") ///\n   eqlabels(\"Männer\" \"Frauen\") /// \n   nomtitles ///\n   coeflabel(F518_SUF \"Bruttoverdienst\" zpalter \"Alter\")   \n```\n:::\n\n::: {.cell}\n\n```\n## . quiet. esttab, cells(\"mean(fmt(%10.1fc)) sd(fmt(%13.3fc) par)\") nostar  nonumber unstack ///\n## >   nomtitle nonote noobs label  ///\n## >    collabels(\"Mean\" \"SD\" \"Mean\" \"SD\") ///\n## >    eqlabels(\"Männer\" \"Frauen\") /// \n## >    nomtitles ///\n## >    coeflabel(F518_SUF \"Bruttoverdienst\" zpalter \"Alter\")   \n## \n## ------------------------------------------------------------------------\n##                            Männer                    Frauen             \n##                              Mean           SD         Mean           SD\n## ------------------------------------------------------------------------\n## Alter                        46.5     (11.877)         47.9     (10.716)\n## Bruttoverdienst           4,232.7  (3,951.324)      2,800.9  (2,852.935)\n## ------------------------------------------------------------------------\n```\n:::\n\n\n\n***\n\n**[Übung 4](#tabst4)**\n\n***\n\n\n## Übungen\n\n### Übung {#tabst1}\n\n+ Erstellen Sie eine Überblickstabelle für `F200` (Wochenarbeitszeit) mit Min, Mean, SD, 1. Quartil (`p25`), Median, 3. Quartil (`p75`) und der Anzahl der Beobachtungen.\n+ Labeln Sie die Spalten mit den Kennzahlen und auch die Variable.\n\n\n### Übung {#tabst2}\n\n+ Ergänzen Sie die Tabelle von Übung 1 `F200` um `fastgini` - so kommen Sie an die abgelegte Info:\n\n\n::: {.cell}\n\n```{.stata .cell-code}\nssc install fastgini // falls nicht schon installiert\nfastgini F518_SUF\nreturn list\n```\n:::\n\n\n### Übung {#tabst3}\n\n+ Verändern Sie die oben gezeigte Schleife so, dass nicht mehr die *Anzahl*, sondern der *Anteil* der Missings eingefügt wird.\n\n\n::: {.cell}\n\n```{.stata .cell-code}\nmdesc zpalter F518_SUF\nreturn list \n```\n:::\n\n\n\n### Übung {#tabst4}\n\n+ Erweitern Sie den Gruppenvergleich um die Variablen `az` (Wochenarbeitszeit) und `F1104` (Jahr des Schulabschlusses)\n+ Wo könnten Sie die Nachkommastellen verändern? Verändern Sie die Anzeige für die Mittelwerte auf 3 Nachkommastellen\n+ Lassen Sie sich in auch den Median ausgeben. Legen Sie dafür 0 Nachkommastellen als Format fest. Denken Sie daran, `estpost` neu zu konfigurieren.\n+ Passen Sie die Syntax in `cells()` an, um die Werte neben- oder untereinander angezeigt zu bekommen.\n\n\n\n## Mehr zu `format` {#format}\n\nHier eine kurze (unvollständige) Erklärung zu den `fmt()`-Optionen, mehr unter `help format` oder **[hier](https://wlm.userweb.mwn.de/Stata/wstatfor.htm)**\n\n### %w.df\n\n+ Mit `w` geben wir die Gesamtbreite des Outputs an - die Vorzeichen und Dezimaltrenner mitgezählt\n+ `d` gibt die Zahl der Dezimalstellen\n+ Grundsätzlich wird von \"rechts\" gezählt - The result is right-justified.\n\nAus der Stata-Hilfe:\n\nThe number 5.139 in `%12.2f` format displays as\n\n::: {.cell}\n\n```{.r .cell-code}\n----+----1--\n        5.14\n```\n:::\n\n\n*Beispiele*\n\n::: {.cell}\n\n```{.stata .cell-code}\nhelp format\n\tdis strlen(\"10789.1234\")\n## . help forrequest ignored because of batch mode\n## \n## .         dis strlen(\"10789.1234\")\n## 10\n```\n:::\n\n::: {.cell}\n\n```{.stata .cell-code}\ndisplay %10.2f \t10789.1234 // 0 Nachkommastellen\ndisplay %10.0f \t10789.1234 // 2 Nachkommastellen\ndisplay %11.5f \t10789.1234 // 0 am Ende hinzugefügt\n```\n:::\n\n\n### %w.dfc\n    \nAnalog zu `%w.df`, jedoch werden Kommata für bessere Lesbarkeit eingefügt. Auch die Kommata zählen für die Breite `w`.\n\nWährend ``\n\n\nMit `%`*w*`**,**`*d*`fc` können wir das Format für Dezimal- und Tausendertrenner ändern: Dezimalstellen werden mit einem `,` abgetrennt, 1000er mit `.`\n\n*Beispiele*: mit `fc` werden Tausendertrenner eingefügt\n\n::: {.cell}\n\n```{.stata .cell-code}\ndisplay %10.2fc \t10789.1234\ndisplay %10.2fc \t10789.1234\n## . display %10.2fc         10789.1 10,789.12\n## \n## . display %10.2fc         10789.1234\n##  10,789.12\n```\n:::\n\n::: {.cell}\n\n```{.stata .cell-code}\ndisplay %10,2fc \t10789.1234 // , und . tauschen -> \"dt Format\"\n```\n:::\n\n::: {.cell}\n\n```{.stata .cell-code}\n10.789,12\n```\n:::\n",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {
      "include-in-header": [
        "<script src=\"site_libs/kePrint-0.0.1/kePrint.js\"></script>\r\n<link href=\"site_libs/lightable-0.0.1/lightable.css\" rel=\"stylesheet\" />\r\n"
      ]
    },
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}