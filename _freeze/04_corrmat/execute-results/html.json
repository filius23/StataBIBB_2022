{
  "hash": "1bc78b67f2c9bf6f55bdf6aa86fe58fd",
  "result": {
    "markdown": "# Korrelationsmatrix  {#cormat} \n\n\n::: {.cell}\n\n:::\n\n\n\nHäufig ist eine Korrelationsmatrix ein Bestandteil einer Datendeskription.\n\n## `corr x`\n\n\n::: {.cell}\n\n```{.stata .cell-code}\ncorrelate zpalter F518_SUF F200\n```\n:::\n\n::: {.cell}\n::: {.cell-output .cell-output-stdout}\n```\n(obs=14,579)\n\n             |  zpalter F518_SUF     F200\n-------------+---------------------------\n     zpalter |   1.0000\n    F518_SUF |   0.0582   1.0000\n        F200 |  -0.0539   0.2922   1.0000\n```\n:::\n:::\n\n\nWieder benötigen wir `estpost`, um dann die `esttab`-Tabelle zu erstellen:\nMit `modelwidth()` können wir die Breite der Spalten steuern.\n\n::: {.cell}\n\n```{.stata .cell-code}\nestpost correlate zpalter F518_SUF F200, matrix\nesttab ., not unstack compress noobs nonumber nomtitles ///\n\t\t varlabels(zpalter \"(1) Alter\" F518_SUF \"(2) Bruttoeinkommen\" F200 \"(3) Wochenarbeitszeit\") ///\n\t\t eqlabels(\"(1) Alter\" \"(2) Bruttoeinkommen\" \"(3) Wochenarbeitszeit\") ///\n\t\t varwidth(30) ///\n     modelwidth(30)\n```\n:::\n\n::: {.cell}\n::: {.cell-output .cell-output-stdout}\n```\n             |      e(b)     e(rho)       e(p)   e(count) \n-------------+--------------------------------------------\nzpalter      |                                            \n     zpalter |         1          1                 19836 \n    F518_SUF |  .0795555   .0795555   1.21e-24      16543 \n        F200 | -.0557859  -.0557859   2.35e-13      17228 \nF518_SUF     |                                            \n    F518_SUF |         1          1                 16635 \n        F200 |  .2924452   .2924452   6.4e-287      14659 \nF200         |                                            \n        F200 |         1          1                 17376 \n\n\n---------------------------------------------------------------------\n                               (1) Alter    (2) Bru~n    (3) Woc~t   \n---------------------------------------------------------------------\n(1) Alter                              1                             \n(2) Bruttoeinkommen               0.0796***         1                \n(3) Wochenarbeitszeit            -0.0558***     0.292***         1   \n---------------------------------------------------------------------\n* p<0.05, ** p<0.01, *** p<0.001\n```\n:::\n:::\n\n::: {.cell}\n\n```{.stata .cell-code}\nesttab  using \"${res}/corrmat.rtf\", not unstack compress noobs nonumber nomtitles ///\n\t\t varlabels(zpalter \"(1) Alter\" F518_SUF \"(2) Bruttoeinkommen\" F200 \"(3) Wochenarbeitszeit\") ///\n\t\t eqlabels(\"(1) Alter\" \"(2) Bruttoeinkommen\" \"(3) Wochenarbeitszeit\") ///\n\t\t varwidth(30) ///\n\t\t replace\n\t\t \nesttab  using \"${res}/corrmat.tex\", not unstack compress noobs nonumber nomtitles ///\n\t\t varlabels(zpalter \"(1) Alter\" F518_SUF \"(2) Bruttoeinkommen\" F200 \"(3) Wochenarbeitszeit\") ///\n\t\t eqlabels(\"(1) Alter\" \"(2) Bruttoeinkommen\" \"(3) Wochenarbeitszeit\") ///\n\t\t varwidth(30) ///\n\t\t replace booktabs\n```\n:::\n\n\n\n## Spearman's $\\rho$\n\nFür den Rangkorrelationskoeffizienten müssen wir einen kleinen Umweg gehen und die Variablen mit Hilfe von `egen` in Ränge umwandeln:\n\n\n::: {.cell}\n\n```{.stata .cell-code}\nforeach v of varlist zpalter F518_SUF F200 {\n\tegen rnk_`v' = rank (`v'), unique\n}\nestpost correlate rnk_zpalter rnk_F518_SUF rnk_F200, matrix\n```\n:::\n\n::: {.cell}\n::: {.cell-output .cell-output-stdout}\n```\n             |      e(b)     e(rho)       e(p)   e(count) \n-------------+--------------------------------------------\nrnk_zpalter  |                                            \n rnk_zpalter |         1          1                 19836 \nrnk_F518_SUF |  .0971437   .0971437   5.57e-36      16543 \n    rnk_F200 | -.0654795  -.0654795   7.76e-18      17228 \nrnk_F518_SUF |                                            \nrnk_F518_SUF |         1          1                 16635 \n    rnk_F200 |  .4553877   .4553877          0      14659 \nrnk_F200     |                                            \n    rnk_F200 |         1          1                 17376 \n```\n:::\n:::\n\n\nDanach können wir die Korrelationsmatrix auch für den Rangkorrelationskoeffizienten wie oben erstellen:\n\n\n::: {.cell}\n\n```{.stata .cell-code}\nesttab ., not unstack compress noobs nonumber nomtitles ///\n\t\t varlabels(zpalter \"(1) Alter\" F518_SUF \"(2) Bruttoeinkommen\" F200 \"(3) Wochenarbeitszeit\") ///\n\t\t eqlabels(\"(1) Alter\" \"(2) Bruttoeinkommen\" \"(3) Wochenarbeitszeit\") ///\n\t\t varwidth(30) ///\n\t\t modelwidth(30) ///\n\t\t title(\"Dies ist der Spearman-Rangkorrelationskoeffizient\")\n```\n:::\n\n::: {.cell}\n::: {.cell-output .cell-output-stdout}\n```\nDies ist der Spearman-Rangkorrelationskoeffizient\n------------------------------------------------------------------------------------------------------------------------------------\n                                                    (1) Alter               (2) Bruttoeinkommen             (3) Wochenarbeitszeit   \n------------------------------------------------------------------------------------------------------------------------------------\nrnk_zpalter                                                 1                                                                       \nrnk_F518_SUF                                           0.0971***                              1                                     \nrnk_F200                                              -0.0655***                          0.455***                              1   \n------------------------------------------------------------------------------------------------------------------------------------\n* p<0.05, ** p<0.01, *** p<0.001\n```\n:::\n:::\n\n::: {.cell}\n\n```{.stata .cell-code}\nesttab  using \"${res}/corrmat2.rtf\", not unstack compress noobs nonumber nomtitles ///\n\t\t varlabels(zpalter \"(1) Alter\" F518_SUF \"(2) Bruttoeinkommen\" F200 \"(3) Wochenarbeitszeit\") ///\n\t\t eqlabels(\"(1) Alter\" \"(2) Bruttoeinkommen\" \"(3) Wochenarbeitszeit\") ///\n\t\t varwidth(30) ///\n\t\t replace ///\n\t\t title(\"Dies ist der Spearman-Rangkorrelationskoeffizient\")\n\t\t \n\t\t \nesttab  using \"${res}/corrmat2.tex\", not unstack compress noobs nonumber nomtitles ///\n\t\t varlabels(zpalter \"(1) Alter\" F518_SUF \"(2) Bruttoeinkommen\" F200 \"(3) Wochenarbeitszeit\") ///\n\t\t eqlabels(\"(1) Alter\" \"(2) Bruttoeinkommen\" \"(3) Wochenarbeitszeit\") ///\n\t\t varwidth(30) ///\n\t\t replace booktabs ///\n\t\t title(\"Dies ist der Spearman-Rangkorrelationskoeffizient\")\n```\n:::\n\n\n\n\n\n***\n\n**[Übung](#corr1)**\n\n***\n\n## `ttest` {#ttest}\n\n\nt-Test sind ebenfalls ein Klassiker.\nMit `ttest az, by(S1) unequal` können wir einen Signifikanztest berechnen. Auch hier benötigen wir `estpost`, um die Ergebnisse zu speichern und dann mit `esttab` verarbeiten zu können.\n\n\n::: {.cell}\n\n```{.stata .cell-code}\nttest az, by(S1) unequal\nestpost ttest az F518_SUF, by(S1) unequal\n```\n:::\n\n::: {.cell}\n::: {.cell-output .cell-output-stdout}\n```\n             |      e(b)   e(count)      e(se)       e(t)    e(df_t)     e(p_l)       e(p)     e(p_u)     e(N_1)    e(mu_1)     e(N_2)    e(mu_2) \n-------------+------------------------------------------------------------------------------------------------------------------------------------\n          az |  8.320936      20012    .155519   53.50431   19742.97          1          0          0      10074   42.43776       9938   34.11682 \n    F518_SUF |  1431.809      16635   53.27106   26.87781   15471.34          1   1.5e-155   7.3e-156       8495   4232.735       8140   2800.926 \n```\n:::\n:::\n\n::: {.cell}\n\n```{.stata .cell-code}\nesttab, wide nonumber noobs\n```\n:::\n\n::: {.cell}\n::: {.cell-output .cell-output-stdout}\n```\naz                  8.321***      (53.50)\nF518_SUF           1431.8***      (26.88)\n-----------------------------------------\nt statistics in parentheses\n* p<0.05, ** p<0.01, *** p<0.001\n```\n:::\n:::\n\n::: {.cell}\n\n```{.stata .cell-code}\nesttab,  cell(\"b(fmt(%13.3fc)) t(fmt(%13.3fc) star) N_1(fmt(%13.0fc)) mu_1 N_2(fmt(%13.0fc)) mu_2\") /// \n\tunstack wide nonumber noobs nomtitles ///\n\tcollabels(\"Difference\" \"t\" \"N(M)\" \"Mean(M)\" \"N(W)\" \"Mean(W)\")\t\t \t\t \n```\n:::\n\n::: {.cell}\n::: {.cell-output .cell-output-stdout}\n```\n               Difference            t            N(M)      Mean(M)         N(W)      Mean(W)\n---------------------------------------------------------------------------------------------\naz                  8.321       53.504***       10,074       42.438        9,938       34.117\nF518_SUF        1,431.809       26.878***        8,495    4,232.735        8,140    2,800.926\n---------------------------------------------------------------------------------------------\n```\n:::\n:::\n\n\n\n***\n\n**[Übung](#ttest1)**\n\n***\n\n## Übungen\n\n### Übung {#corr1}\n\n+ Erstellen Sie eine Korrelationstabelle für  `zpalter` `F518_SUF` `F200` und `F1410_01` (Jahre berufstätig in D)\n\n### Übung {#ttest1}\n\n+ Erstellen Sie eine t-Testtabelle für Gruppenunterschiede zwischen Menschen mit und ohne Migrationshintergrund für die Variablen `az` und `F518_SUF`. Die Variablen zum Migrationshintergrund können Sie so erstellen (siehe `01_init.do`): \n\n\n::: {.cell}\n\n```{.stata .cell-code}\ngen mig01 = Mig != 0\n```\n:::\n\nIn `mig01` steht dann `0` für keinen Migrationshintergrund und `1` für Migrationshintergrund.\n\n",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}